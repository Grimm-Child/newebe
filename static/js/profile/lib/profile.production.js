(function(){var e=Object.prototype.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)if(e.call(b,d))a[d]=b[d];c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};(function(){function a(){a.__super__.constructor.apply(this,arguments)}f(a,Backbone.View);a.prototype.el=$("#profile");a.prototype.initialize=function(){_.bindAll(this,"onKeyUp","postUserInfo","fetch","addAll");this.users=new UserCollection;return this.users.bind("refresh",this.addAll)};
a.prototype.onKeyUp=function(){return this.postUserInfo()};a.prototype.addAll=function(){this.user=this.users.first();$("#platform-profile-name").val(this.user.getName());$("#platform-profile-city").val(this.user.getCity());$("#platform-profile-url").val(this.user.get("url"));if(!this.user.get("url")){this.tutorialOn=true;this.displayTutorial(1)}return this.users};a.prototype.fetch=function(){this.users.fetch();return this.users};a.prototype.postUserInfo=function(){var b;$("#profile").addClass("modified");
b=this.tutorialOn;return this.user.save({name:$("#platform-profile-name").val(),url:$("#platform-profile-url").val(),city:$("#platform-profile-city").val()},{success:function(){b&&$.get("/profile/tutorial/2/",function(c){return $("#tutorial-profile").html(c)});return $("#profile").removeClass("modified")}})};a.prototype.testTutorial=function(){if(this.tutorialOn){this.displayTutorial(2);this.tutorialOn=false}return false};a.prototype.displayTutorial=function(b){return $.get("/profile/tutorial/"+b+
"/",function(c){return $("#tutorial-profile").html(c)})};a.prototype.setListeners=function(){$("#platform-profile-name").keyup(function(b){return profileApp.onKeyUp(b)});$("#platform-profile-url").keyup(function(b){return profileApp.onKeyUp(b)});return $("#platform-profile-city").keyup(function(b){return profileApp.onKeyUp(b)})};a.prototype.setWidgets=function(){$("#profile input").val(null);return $("#profile-a").addClass("disabled")};return a})()}).call(this);
