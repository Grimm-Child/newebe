(function(){var g,h,d,i=Object.prototype.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var e in b)if(i.call(b,e))a[e]=b[e];c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};g=function(){function a(b){a.__super__.constructor.apply(this,arguments);this.id="";this.set("url",b.url);this.set("name",b.name);this.set("description",b.description)}f(a,Backbone.Model);a.prototype.url="/user/";a.prototype.getName=function(){return this.get("name")};a.prototype.setName=
function(b){alert(b);this.set("name",b);return alert(this.getName())};a.prototype.getUrl=function(){return this.get("userUrl")};a.prototype.setUrl=function(b){return this.set("url",b)};a.prototype.getDescription=function(){return this.get("description")};a.prototype.setDescription=function(b){return this.set("description",b)};a.prototype.isNew=function(){return false};return a}();h=function(){function a(){a.__super__.constructor.apply(this,arguments)}f(a,Backbone.Collection);a.prototype.model=g;a.prototype.url=
"/user/";a.prototype.parse=function(b){return b.rows};return a}();d=new (function(){function a(){a.__super__.constructor.apply(this,arguments)}f(a,Backbone.View);a.prototype.el=$("#profile");a.prototype.initialize=function(){_.bindAll(this,"onKeyUp","postUserInfo","fetch","addAll");this.users=new h;return this.users.bind("refresh",this.addAll)};a.prototype.onKeyUp=function(b){this.postUserInfo();return b};a.prototype.addAll=function(){this.user=this.users.first();$("#platform-profile-name").val(this.user.getName());
$("#profile-description").val(this.user.getDescription());$("#platform-profile-url").val(this.user.get("url"));this.renderProfile();if(!this.user.get("url")){this.tutorialOn=true;this.displayTutorial(1)}return this.users};a.prototype.fetch=function(){this.users.fetch();return this.users};a.prototype.postUserInfo=function(){var b;$("#profile").addClass("modified");b=this.tutorialOn;this.user.save({name:$("#platform-profile-name").val(),url:$("#platform-profile-url").val(),description:$("#profile-description").val()},
{success:function(){b&&$.get("/profile/tutorial/2/",function(c){return $("#tutorial-profile").html(c)});return $("#profile").removeClass("modified")}});return this.renderProfile()};a.prototype.testTutorial=function(){if(this.tutorialOn){this.displayTutorial(2);this.tutorialOn=false}return false};a.prototype.displayTutorial=function(b){return $.get("/profile/tutorial/"+b+"/",function(c){return $("#tutorial-profile").html(c)})};a.prototype.renderProfile=function(){var b,c;c=_.template('<h1 class="profile-name"><%= name %></h1>\n<p class="profile-url"><%= url %></p>\n<p class="profile-description"><%= description %></p>');
b=$("#profile-description").val();b=(new Showdown.converter).makeHtml(b);$("#profile-render").html(c({name:$("#platform-profile-name").val(),url:$("#platform-profile-url").val(),description:b}));return this.user};a.prototype.setListeners=function(){$("#platform-profile-name").keyup(function(b){return d.onKeyUp(b)});$("#platform-profile-url").keyup(function(b){return d.onKeyUp(b)});return $("#profile-description").keyup(function(b){return d.onKeyUp(b)})};a.prototype.setWidgets=function(){$("#profile input").val(null);
return $("#profile-a").addClass("disabled")};return a}());d.setWidgets();d.setListeners();d.fetch()}).call(this);
