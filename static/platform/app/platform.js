((function(){var a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r=Object.prototype.hasOwnProperty,s=function(a,b){function d(){this.constructor=a}for(var c in b)r.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},t=function(a,b){return function(){return a.apply(b,arguments)}};g=function(){function a(){a.__super__.constructor.apply(this,arguments)}return s(a,Backbone.Router),a.prototype.routes={contact:"displayContact",news:"displayNews",activities:"displayActivities",profile:"displayProfile",notes:"displayNotes"},a.prototype.displayContact=function(){return this.view.onContactClicked()},a.prototype.displayNews=function(){return this.view.onNewsClicked()},a.prototype.displayProfile=function(){return this.view.onProfileClicked()},a.prototype.displayActivities=function(){return this.view.onActivitiesClicked()},a.prototype.displayNotes=function(){return this.view.onNotesClicked()},a.prototype.registerView=function(a){return this.view=a},a}(),b=function(){function a(){var a;$("#form-dialog").length===0&&(a=document.createElement("div"),a.id="form-dialog",a.className="dialog",$("body").prepend(a),this.element=$("#form-dialog"),this.element.html('<div id="form-dialog-text"></div>\n<div id="form-dialog-fields">\n</div>\n<div id="form-dialog-buttons">\n  <span id="form-dialog-yes">ok</span>\n  <span id="form-dialog-no">cancel</span>\n</div>')),this.element=$("#form-dialog"),this.setNoButton,this.element.hide(),this.fields=[]}return a.prototype.addField=function(a){return this.fields.push(a),a.label&&$("#form-dialog-fields").append('<label for="'+a.name+'"></label>'),$("#form-dialog-fields").append('<input class="form-dialog-field"                 id="form-dialog-field-'+a.name+'"                type="text"                 name="'+a.name+'" />')},a.prototype.clearFields=function(){return this.fields=[],$("#form-dialog-fields").html(null)},a.prototype.setNoButton=function(){return $("#form-dialog-no").click(t(function(){return this.element.fadeOut()},this),!1)},a.prototype.display=function(a,b){var c,d,e,f,g;$("#form-dialog-text").empty(),$("#form-dialog-text").append("<span>"+a+"</span>"),$("#form-dialog-yes").click(b),$("#form-dialog-no").click(t(function(){return this.element.hide()},this)),this.element.show();if(this.fields){document.getElementById("form-dialog-field-"+this.fields[0].name).focus(),f=this.fields,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push($("#form-dialog-field-"+c.name).keyup(function(a){if(a.keyCode===13)return b()}));return g}},a.prototype.getVal=function(a){return $("#form-dialog-field-"+this.fields[a].name).val()},a.prototype.hide=function(){return this.element.fadeOut()},a}(),j=function(){function a(){a.__super__.constructor.apply(this,arguments)}return s(a,Backbone.View),a.prototype.el=$("body"),a.prototype.initialize=function(){return _.bindAll(this,"onUserFieldKeyUp"),this.isPosting=!1,$("#platform-user-text-field").val(null),$("#platform-user-text-field").focus(),$("#platform-user-text-field").keyup(this.onUserFieldKeyUp)},a.prototype.onUserFieldKeyUp=function(a){var b,c;if(a.keyCode===13&&!this.isPosting)return b='{ "name":"'+$("#platform-user-text-field").val()+'"}',this.isPosting=!0,c="/register/",$.post(c,b,function(a){return $("#register").fadeOut(1600,function(){return $("body").hide(),$.get("/register/password/content/",function(a){var b;return $("body").prepend(a),$("#menu").hide(),$("#apps").hide(),$("body").show(),$("#menu").fadeIn(),$("#apps").fadeIn(),b=new i})})},"json")},a}(),i=function(){function a(){a.__super__.constructor.apply(this,arguments)}return s(a,Backbone.View),a.prototype.el=$("body"),a.prototype.initialize=function(){return _.bindAll(this,"onUserFieldKeyUp"),this.isPosting=!1,$("#platform-password-text-field").val(null),$("#platform-password-text-field").focus(),$("#platform-password-text-field").keyup(this.onUserFieldKeyUp)},a.prototype.onUserFieldKeyUp=function(a){var b,c;if((a.keyCode===13||e.which===13)&&!this.isPosting)return b='{ "password":"'+$("#platform-password-text-field").val()+'"}',this.isPosting=!0,c="/register/password/",$.post(c,b,function(a){return $("#register").fadeOut(1600,function(){return $("body").hide(),$.get("/profile/menu-content/",function(a){return $("body").prepend(a),$("#menu").hide(),$("#apps").hide(),$("body").show(),$("#menu").fadeIn(),$("#apps").fadeIn()})})},"json")},a}(),f=function(){function a(){a.__super__.constructor.apply(this,arguments)}return s(a,Backbone.View),a.prototype.el=$("body"),a.prototype.initialize=function(){return _.bindAll(this,"onPasswordFieldKeyUp"),this.isPosting=!1,$("#login-password-text-field").val(null),$("#login-password-text-field").focus(),$("#login-password-text-field").keyup(this.onPasswordFieldKeyUp)},a.prototype.onPasswordFieldKeyUp=function(a){var b,c;if(a.keyCode===13&&!this.isPosting)return this.isPosting=!0,c="/login/json/",b='{ "password":"'+$("#login-password-text-field").val()+'"}',$.ajax({type:"POST",url:c,data:b,datatype:"json",success:t(function(a){return $("#login-form").fadeOut(1600,t(function(){return $("body").hide(),$.get("/profile/menu-content/",t(function(a){return $("body").prepend(a),$("#menu").hide(),$("#apps").hide(),$("body").show(),$("#menu").fadeIn(),$("#apps").fadeIn(),this.isPosting=!1},this))},this))},this),error:t(function(){return $("#login-password-text-field").val(null),this.isPosting=!1},this)})},a}(),d=function(){function a(){var a;$("#loading-indicator").length===0&&(a=document.createElement("div"),a.id="loading-indicator",a.innerHTML='<img src="/static/images/clock_32.png" />',$("body").prepend(a)),this.element=$("#loading-indicator"),this.element.hide()}return a.prototype.display=function(){return this.element.show()},a.prototype.hide=function(){return this.element.hide()},a}(),c=function(){function a(){var a;$("#info-dialog").length===0&&(a=document.createElement("div"),a.id="info-dialog",a.className="dialog",$("body").prepend(a)),this.element=$("#info-dialog"),this.element.hide()}return a.prototype.display=function(a){return this.element.empty(),this.element.append(a),this.element.show(),this.element.fadeOut(4e3)},a}(),a=function(){function a(a){var b;$("#confirmation-dialog").length===0&&(b=document.createElement("div"),b.id="confirmation-dialog",b.className="dialog",b.innerHTML='<div id="confirmation-text"></div>',b.innerHTML+='<div id="confirmation-buttons"><span href="" id="confirmation-yes">Yes</span><span href="" id="confirmation-no">No</span></div>',$("body").prepend(b)),this.element=$("#confirmation-dialog"),this.element.hide(),this.setNoButton()}return a.prototype.setNoButton=function(){var a;return a=this.element,$("#confirmation-no").click(function(){return a.fadeOut(),!1})},a.prototype.display=function(a,b){return $("#confirmation-text").empty(),$("#confirmation-text").append("<span>"+a+"</span>"),$("#confirmation-yes").click(b),this.element.show()},a.prototype.hide=function(){return this.element.fadeOut()},a}(),h=function(){function a(b){this.controller=b,b.registerView(this),this.isChangingPage=!1,a.__super__.constructor.apply(this,arguments)}return s(a,Backbone.View),a.prototype.el=$("body"),a.prototype.events={"click #news-a":"onNewsClicked","click #profile-a":"onProfileClicked","click #contact-a":"onContactClicked","click #activities-a":"onActivitiesClicked","click #notes-a":"onNotesClicked"},a.prototype.initialize=function(){return _.bindAll(this,"onNewsClicked","onProfileClicked","switchTo","onContactClicked","onActivitiesClicked","onLogoutClicked"),$("#news").length!==0?this.lastPage="#news":$("#contact").length!==0?this.lastPage="#contact":$("#activities").length!==0?this.lastPage="#activities":$("#notes").length!==0?this.lastPage="#notes":this.lastPage="#profile",$("#platform-user-text-field").val(null),$("#platform-user-text-field").focus()},a.prototype.onNewsClicked=function(a){return a&&a.preventDefault(),this.switchTo("#news","/news/content/","News"),!1},a.prototype.onProfileClicked=function(a){return a&&a.preventDefault(),this.switchTo("#profile","/profile/content/","Profile"),!1},a.prototype.onContactClicked=function(a){return a&&a.preventDefault(),this.switchTo("#contact","/contact/content/","Contact"),!1},a.prototype.onActivitiesClicked=function(a){return a&&a.preventDefault(),this.switchTo("#activities","/activities/content/","Activities"),!1},a.prototype.onNotesClicked=function(a){return a&&a.preventDefault(),this.switchTo("#notes","/notes/content/","Notes"),!1},a.prototype.switchTo=function(a,b,c){if(!this.isChangingPage)return this.isChangingPage=!0,document.title="Newebe | "+c,$(this.lastPage+"-a").removeClass("disabled"),$(a+"-a").addClass("disabled"),this.controller.navigate(a),this.lastPage!==a?$(this.lastPage).fadeOut(this.onLastPageFadeOut(a,b)):this.isChangingPage=!1,this.lastPage},a.prototype.onLastPageFadeOut=function(a,b){return $(this.lastPage).hide(),this.lastPage=a,$(a).length===0?$.get(b,t(function(b){return $("#apps").prepend(b),$(a).fadeIn(),this.isChangingPage=!1},this)):($(a).fadeIn(),this.isChangingPage=!1),!1},a}(),k=new c,n=new g,o=new h(n),l=new d,q=new j,p=new i,m=new f,Backbone.history.start()})).call(this);