(function(){var f,i,j,k,l,h,m,n=Object.prototype.hasOwnProperty,e=function(b,a){function c(){this.constructor=b}for(var d in a)if(n.call(a,d))b[d]=a[d];c.prototype=a.prototype;b.prototype=new c;b.__super__=a.prototype;return b},g=function(b,a){return function(){return b.apply(a,arguments)}};k=function(){function b(){b.__super__.constructor.apply(this,arguments)}e(b,Backbone.Controller);b.prototype.routes={contact:"displayContact",news:"displayNews",activities:"displayActivities",profile:"displayProfile"};
b.prototype.displayContact=function(){return this.view.onContactClicked()};b.prototype.displayNews=function(){return this.view.onNewsClicked()};b.prototype.displayProfile=function(){return this.view.onProfileClicked()};b.prototype.displayActivities=function(){return this.view.onActivitiesClicked()};b.prototype.registerView=function(a){return this.view=a};return b}();l=function(){function b(a){this.controller=a;a.registerView(this);b.__super__.constructor.apply(this,arguments)}e(b,Backbone.View);b.prototype.el=
$("body");b.prototype.events={"click #news-a":"onNewsClicked","click #profile-a":"onProfileClicked","click #contact-a":"onContactClicked","click #activities-a":"onActivitiesClicked"};b.prototype.initialize=function(){_.bindAll(this,"onNewsClicked","onProfileClicked","switchTo","onContactClicked","onActivitiesClicked","onLogoutClicked");this.lastPage=$("#news").length!==0?"#news":$("#contact").length!==0?"#contact":$("#activities").length!==0?"#activties":"#profile";$("#platform-user-text-field").val(null);
return $("#platform-user-text-field").focus()};b.prototype.onNewsClicked=function(a){a&&a.preventDefault();document.title="Newebe | News";this.switchTo("#news","/news/content/");return false};b.prototype.onProfileClicked=function(a){a&&a.preventDefault();document.title="Newebe | Profile";this.switchTo("#profile","/profile/content/");return false};b.prototype.onContactClicked=function(a){a&&a.preventDefault();document.title="Newebe | Contact";this.switchTo("#contact","/contact/content/");return false};
b.prototype.onActivitiesClicked=function(a){a&&a.preventDefault();document.title="Newebe | Activities";this.switchTo("#activities","/activities/content/");return false};b.prototype.switchTo=function(a,c){$(this.lastPage+"-a").removeClass("disabled");$(a+"-a").addClass("disabled");this.controller.saveLocation(a);this.lastPage!==a&&$(this.lastPage).fadeOut(this.onLastPageFadeOut(a,c));return this.lastPage};b.prototype.onLastPageFadeOut=function(a,c){$(this.lastPage).hide();this.lastPage=a;$(a).length===
0?$.get(c,function(d){$("#apps").prepend(d);return $(a).fadeIn()}):$(a).fadeIn();return false};return b}();m=function(){function b(){b.__super__.constructor.apply(this,arguments)}e(b,Backbone.View);b.prototype.el=$("body");b.prototype.initialize=function(){_.bindAll(this,"onUserFieldKeyUp");this.isPosting=false;$("#platform-user-text-field").val(null);$("#platform-user-text-field").focus();return $("#platform-user-text-field").keyup(this.onUserFieldKeyUp)};b.prototype.onUserFieldKeyUp=function(a){if(a.keyCode===
13&&!this.isPosting){a='{ "name":"'+$("#platform-user-text-field").val()+'"}';this.isPosting=true;return $.post("/register/",a,function(){return $("#register").fadeOut(1600,function(){$("body").hide();return $.get("/register/password/content/",function(c){$("body").prepend(c);$("#menu").hide();$("#apps").hide();$("body").show();$("#menu").fadeIn();$("#apps").fadeIn();return new h})})},"json")}};return b}();h=function(){function b(){b.__super__.constructor.apply(this,arguments)}e(b,Backbone.View);
b.prototype.el=$("body");b.prototype.initialize=function(){_.bindAll(this,"onUserFieldKeyUp");this.isPosting=false;$("#platform-password-text-field").val(null);$("#platform-password-text-field").focus();return $("#platform-password-text-field").keyup(this.onUserFieldKeyUp)};b.prototype.onUserFieldKeyUp=function(a){if(a.keyCode===13&&!this.isPosting){a='{ "password":"'+$("#platform-password-text-field").val()+'"}';this.isPosting=true;return $.post("/register/password/",a,function(){return $("#register").fadeOut(1600,
function(){$("body").hide();return $.get("/profile/menu-content/",function(c){$("body").prepend(c);$("#menu").hide();$("#apps").hide();$("body").show();$("#menu").fadeIn();return $("#apps").fadeIn()})})},"json")}};return b}();j=function(){function b(){b.__super__.constructor.apply(this,arguments)}e(b,Backbone.View);b.prototype.el=$("body");b.prototype.initialize=function(){_.bindAll(this,"onPasswordFieldKeyUp");this.isPosting=false;$("#login-password-text-field").val(null);$("#login-password-text-field").focus();
return $("#login-password-text-field").keyup(this.onPasswordFieldKeyUp)};b.prototype.onPasswordFieldKeyUp=function(a){if(a.keyCode===13&&!this.isPosting){this.isPosting=true;a='{ "password":"'+$("#login-password-text-field").val()+'"}';return $.ajax({type:"POST",url:"/login/json/",data:a,datatype:"json",success:g(function(){return $("#login-form").fadeOut(1600,g(function(){$("body").hide();return $.get("/profile/menu-content/",g(function(c){$("body").prepend(c);$("#menu").hide();$("#apps").hide();
$("body").show();$("#menu").fadeIn();$("#apps").fadeIn();return this.isPosting=false},this))},this))},this),error:g(function(){$("#login-password-text-field").val(null);return this.isPosting=false},this)})}};return b}();f=function(){function b(){var a;a=document.createElement("div");a.id="info-dialog";a.className="dialog";a.innerHTML="Test";$("body").prepend(a);this.element=$("#info-dialog");this.element.hide()}b.prototype.display=function(a){this.element.empty();this.element.append(a);this.element.show();
return this.element.fadeOut(4E3)};return b}();(function(){function b(){var a;a=document.createElement("div");a.id="confirmation-dialog";a.className="dialog";a.innerHTML='<div id="confirmation-text"></div>';a.innerHTML+='<div id="confirmation-buttons"><span href="" id="confirmation-yes">Yes</span><span href="" id="confirmation-no">No</span></div>';$("body").prepend(a);this.element=$("#confirmation-dialog");this.element.hide();this.setNoButton()}b.prototype.setNoButton=function(){var a;a=this.element;
return $("#confirmation-no").click(function(){a.fadeOut();return false})};b.prototype.display=function(a,c){$("#confirmation-text").empty();$("#confirmation-text").append("<span>"+a+"</span>");$("#confirmation-yes").click(c);return this.element.show()};b.prototype.hide=function(){return this.element.fadeOut()};return b})();i=function(){function b(){var a;a=document.createElement("div");a.id="loading-indicator";a.innerHTML='<img src="/static/images/clock_32.png" />';$("body").prepend(a);this.element=
$("#loading-indicator");this.element.hide()}b.prototype.display=function(){return this.element.show()};b.prototype.hide=function(){return this.element.hide()};return b}();new f;f=new k;new l(f);new i;new m;new h;new j;Backbone.history.start()}).call(this);
